{
  "id": "jest",
  "title": "Jest Cheat Sheet",
  "intro": "Jest is a JavaScript testing framework designed by Facebook. It works out of the box with modern\nJavaScript apps especially those built with React or Node.js. Its main goal is to simplify testing by providing all required features in one package test runner, assertion library, mocking, spies, coverage reports, and snapshot testing.",
  "tags": [
    "React",
    "Testing",
    "Jest"
  ],
  "categories": [
    "Testing"
  ],
  "background": "bg-blue-500",
  "content": "---\n\n## A Quick Overview to Jest\n\nJest is a delightful JavaScript testing framework maintained by Facebook. It is widely used for **unit testing**, **integration testing**, and even **end-to-end testing** in modern JavaScript and Node.js applications. Jest comes with a powerful set of features, including a built-in test runner, assertion library, mocking utilities, snapshot testing, and test coverage reporting.\n\nThis guide targets **Jest v20** and gives a concise yet practical overview of how to use it effectively.\n\n### Key Concepts Explained\n\n- **`describe()`**: Used to group related test cases into a test suite.\n- **`test()` / `it()`**: Define a single test case. `it()` is just a BDD-style alias for `test()`.\n- **`expect()`**: Assertion library that checks whether a value meets expectations.\n- **`beforeEach()` / `afterEach()`**: Runs code before or after every test in a suite.\n- **`beforeAll()` / `afterAll()`**: Runs setup/teardown code once before or after all tests.\n- **`.only` / `.skip`**: Focus or ignore specific tests/suites.\n- **Snapshot testing**: Captures the rendered output and compares it across test runs.\n- **Mock functions**: Simulate function behavior or monitor how functions are called.\n- **Timer mocks**: Test time-based behavior like `setTimeout()` and `setInterval()`.\n- **Async testing**: Write tests that handle Promises or `async/await`.\n\n---\n\n### ðŸš€ Quick Start\n\n```bash\nnpm install --save-dev jest babel-jest\n```\n\nAdd this to your `package.json`:\n\n```json\n\"scripts\": {\n  \"test\": \"jest\"\n}\n```\n\nRun your tests:\n\n```bash\nnpm test -- --watch\n```\n\nðŸ“– See: [Getting Started](https://jestjs.io/docs/getting-started)\n\n---\n\n## âœï¸ Writing Tests\n\n```js\ndescribe('My work', () => {\n  test('works', () => {\n    expect(2).toEqual(2);\n  });\n});\n```\n\n- **describe**: Group related tests.\n- **test** or **it**: Define individual test cases.\n- **expect**: Make assertions.\n\nðŸ”„ `it()` is an alias for `test()`.\n\n---\n\n## ðŸ”§ Setup Hooks\n\nUse these for setup/teardown routines:\n\n```js\nbeforeEach(() => { ... });\nafterEach(() => { ... });\nbeforeAll(() => { ... });\nafterAll(() => { ... });\n```\n\n---\n\n## ðŸŽ¯ Focusing or Skipping Tests\n\n**Focusing tests:**\n\n```js\ndescribe.only(...);\nit.only(...); // or fit()\n```\n\n**Skipping tests:**\n\n```js\ndescribe.skip(...);\nit.skip(...); // or xit()\n```\n\n---\n\n## ðŸ Optional CLI Flags\n\n| Flag                  | Description                             |\n| --------------------- | --------------------------------------- |\n| `--coverage`          | Show test coverage summary              |\n| `--detectOpenHandles` | Detect unclosed handles (e.g., sockets) |\n| `--runInBand`         | Run tests serially (useful for CI)      |\n\n---\n\n## âœ… Expectations (Matchers)\n\n### Basic\n\n```js\nexpect(value).not.toBe(value);\nexpect(value).toEqual(value);\nexpect(value).toBeTruthy();\n```\n\n> Note: `toEqual` performs deep equality.\n\n### Snapshots\n\n```js\nexpect(value).toMatchSnapshot();\nexpect(value).toMatchInlineSnapshot();\n```\n\n> Inline snapshots require Prettier.\n\n### Errors\n\n```js\nexpect(fn).toThrow(error);\nexpect(fn).toThrowErrorMatchingSnapshot();\n```\n\n### Booleans\n\n```js\nexpect(value).toBeFalsy();\nexpect(value).toBeNull();\nexpect(value).toBeTruthy();\nexpect(value).toBeUndefined();\nexpect(value).toBeDefined();\n```\n\n### Numbers\n\n```js\nexpect(value).toBeCloseTo(number, digits);\nexpect(value).toBeGreaterThan(number);\nexpect(value).toBeLessThanOrEqual(number);\n```\n\n### Objects\n\n```js\nexpect(value).toBeInstanceOf(Class);\nexpect(value).toMatchObject(obj);\nexpect(value).toHaveProperty('key', value);\n```\n\n### Arrays/Strings\n\n```js\nexpect(value).toContain(item);\nexpect(value).toHaveLength(number);\nexpect(value).toMatch(/pattern/);\n```\n\n### Custom Matchers\n\n```js\nexpect.extend(customMatchers);\nexpect.any(Constructor);\nexpect.assertions(1);\n```\n\n---\n\n## â±ï¸ Async Tests\n\n### Promises\n\n```js\ntest('resolves correctly', () => {\n  return somePromise().then(data => {\n    expect(data).toEqual(...);\n  });\n});\n```\n\n### Async/Await\n\n```js\ntest('awaits correctly', async () => {\n  const result = await asyncFunc();\n  expect(result).toBe(...);\n});\n```\n\nðŸ“– See: [Jest Async Testing](https://jestjs.io/docs/asynchronous)\n\n---\n\n## ðŸ“¸ Snapshot Testing\n\n```js\nit('renders correctly', () => {\n  const output = something();\n  expect(output).toMatchSnapshot();\n});\n```\n\nFor React components:\n\n```js\nimport renderer from 'react-test-renderer';\n\nit('matches snapshot', () => {\n  const tree = renderer.create(<Component />).toJSON();\n  expect(tree).toMatchSnapshot();\n});\n```\n\n---\n\n## â²ï¸ Timers\n\n```js\njest.useFakeTimers();\n\nit('delays call', () => {\n  jest.runOnlyPendingTimers();\n  jest.runAllTimers();\n});\n```\n\nðŸ“– See: [Timer Mocks](https://jestjs.io/docs/timer-mocks)\n\n---\n\n## ðŸ§ª Mock Functions\n\n### Creating Mocks\n\n```js\nconst fn = jest.fn();\nconst squared = jest.fn((n) => n * n);\n```\n\n### Assertions\n\n```js\nexpect(fn).toHaveBeenCalled();\nexpect(fn).toHaveBeenCalledTimes(2);\nexpect(fn).toHaveBeenCalledWith(arg1, arg2);\n```\n\n### Flexible Matchers\n\n```js\nexpect(fn).toHaveBeenCalledWith(expect.any(String));\nexpect(fn).toHaveBeenCalledWith(expect.arrayContaining([1, 2]));\n```\n\n### Instances\n\n```js\nconst MyClass = jest.fn();\nconst a = new MyClass();\nconst b = new MyClass();\nMyClass.mock.instances; // [a, b]\n```\n\n### Call Data\n\n```js\nfn.mock.calls.length;\nfn.mock.calls[0][0];\n```\n\n### Return Values\n\n```js\njest.fn().mockReturnValue('hello');\njest.fn().mockReturnValueOnce('hi');\n```\n\n### Mock Implementations\n\n```js\nconst fn = jest\n  .fn()\n  .mockImplementationOnce(() => 1)\n  .mockImplementationOnce(() => 2);\n```\n\n---\n\nThis comprehensive guide helps you get started with Jest testing or use it like a pro. It pairs perfectly with the React Testing Library for a user-centric testing workflow.\n"
}