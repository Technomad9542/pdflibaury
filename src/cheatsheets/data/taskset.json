{
  "id": "taskset",
  "title": "Taskset",
  "intro": "The taskset command is used to set or retrieve the CPU affinity of a running process given its pid, or to launch a new\ncommand with a given CPU affinity.",
  "tags": [
    "process",
    "process manager"
  ],
  "categories": [
    "Linux Command"
  ],
  "background": "bg-[#8bbb55]",
  "content": "## Getting Started {.cols-3}\n\n### Usage\n\nThe default behavior is to run a new command with a given affinity mask\n\n```shell\n$ taskset [mask] [command] [arguments]\n```\n\n#### Usage #2\n\n```shell\n$ taskset -p [pid]\n```\n\n---\n\n```shell\n$ taskset -p [mask] [pid]\n```\n\nYou can also retrieve the CPU affinity of an existing task\n\n### Common Options {.col-span-2}\n\n| Command | Alternavite | Meaning                                                                                                                                                  |\n| ------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `-a`    | --all-tasks | Set or retrieve the CPU affinity of all the task (threads) for a given PID.                                                                              |\n| `-c`    | --cpu-list  | Interpret mask as numerical list of processors instead of a bitmask.</br>Numbers are separated by commas and may include ranges. For example: `0,5,8-11` |\n| `-p`    | --pid       | Operate on an existing PID and do not launch a new task.                                                                                                 |\n| `-h`    | --help      | Display help text and exit.                                                                                                                              |\n| `-v`    | --version   | Print version and exit.                                                                                                                                  |\n\n{.show-header}\n\n## Example\n\n### View CPU Affinity\n\n```shell\n$ taskset -cp 29523\npid 29523's current affinity list: 0-15\n```\n\nThat mean process with PID `29523` is active on CPU range from `[0,1,...,15]` which means `16` total.\n\n**PID**: Process Identifier - is a unique numerical identifier given to each running process, you can view PID of\nprocesses in `top` or `htop` tools\n\n_If you run the above command but get the message `bad usage`, try with PID = 1_\n\n```shell\n$ taskset -cp 1\n```\n\n### Set CPU Affinity\n\nNow let's try to set process in to a specify CPU. For example, we have a process has PID = 14846\n\nLet's see the CPU affinity list of this process first:\n\n```shell\n$ taskset -cp 14846\npid 14846's current affinity list: 0-15\n```\n\n#### Change CPU affinity to 1:\n\n```shell\n$ taskset -cp 1 14846\npid 14846's current affinity list: 0-15\npid 14846's new affinity list: 1\n```\n\nAs we see, CPU affinity was changed\n\n### Set CPU Affinity with multiple value\n\nThat mean new CPU affinity list is `[0,1,2,3]`\n\n```shell\n$ taskset -cp 0-3 14846\npid 14846's current affinity list: 1\npid 14846's new affinity list: 0-3\n```\n\nYou can set single CPU with the following command:\n\n```shell\n$ taskset -cp 5,8,12 14846\npid 14846's current affinity list: 0-3\npid 14846's new affinity list: 5,8,12\n```\n\nThat mean new CPU affinity list is `[5,8,12]`\n\n### Other\n\nYou can set affinity by range with other like a specify CPU\n\n```shell\n$ taskset -cp 1-3,12 14846\n```\n\nOr\n\n```shell\n$ taskset -cp 1-6:2 14846\n```\n\nThe suffix \":N\" specifies stride in the range, for example 0-10:3 is interpreted as 0,3,6,9 list.\n\n## Also see\n\n[taskset â€” Linux manual page](https://man7.org/linux/man-pages/man1/taskset.1.html) _(man7.org)_\n"
}